---
templates:
  release: &release
    namespace: kassio
    installedTemplate: 
      '{{- or (index .Values.components .Release.Labels.component) false -}}'
    missingFileHandler: Warn
    values:    
      - '{{- if index .Release.Labels "element" -}}
        values-{{ .Release.Labels.element }}.yaml
        {{- else -}}
        values.yaml
        {{- end -}}'
      - '{{- if index .Release.Labels "element" -}}
        {{ .Values.environmentPath }}/{{ .Release.Labels.component }}/values-{{ .Release.Labels.element }}-{{ .Environment.Name }}.yaml
        {{- else -}}
        {{ .Values.environmentPath }}/{{ .Release.Labels.component }}/values-{{ .Environment.Name }}.yaml
        {{- end -}}'
      - ../../vars/common.gotmpl
    secrets:
      - '{{- if index .Release.Labels "element" -}}
        secrets-{{ .Release.Labels.element }}.yaml
        {{- else -}}
        secrets.yaml
        {{- end -}}'